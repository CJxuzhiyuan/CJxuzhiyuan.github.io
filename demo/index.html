<!-- 导入必要的js文件，为加快访问，已经下载到自己的服务器上 -->
<script src="aframe-master.min.js"></script>
<script src="aframe-ar-nft.js"></script>

<!-- 页面的样式 -->
<style>
  .arjs-loader {
    height: 100%;
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
    background-color: rgba(0, 0, 0, 0.8);
    z-index: 9999;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .arjs-loader div {
    text-align: center;
    font-size: 1.25em;
    color: white;
  }
</style>

<head>
  <title>Welcome to PKU-iAI 2047</title>
  <script>
    window.onload = function() {
    };
  </script>
</head>



<script>
  var githubio = 1;
  var classid = Math.floor(Math.random()*6);
  if(classid == 3 && Math.random()<0.5) 
    classid = Math.floor(Math.random()*6);
  var url = "";
  var model = "";
  var scale = "";
  var position = "";
  var rotation = "";

  //Set Platform
  if(githubio == 0){
    url = "cjxuzhiyuan.github.io/demo/descriptors/complex-box";
  }
  else if(githubio == 1){
    url = "demo/descriptors/complex-box";
  }

  //Set Model
  if(classid == 0){
    model = "models/bot-fly/scene.gltf";
    scale = "200 200 200";
    position = "130 50 -280";
    rotation = "0 -90 65";
  }  
  else if(classid == 1){
    model = "models/bot-human/scene.gltf";
    scale = "120 120 120";
    position = "130 50 -200";
    rotation = "-80 0 0";
  }
  else if(classid == 2){
    model = "models/bot-security/scene.gltf";
    scale = "80 80 80";
    position = "130 50 -160";
    rotation = "-90 0 0";
  }
  else if(classid == 3){
    model = "models/bot-shark/scene.gltf";
    scale = "30 30 30";
    position = "130 50 -230";
    rotation = "-30 -120 120";
  }
  else if(classid == 4){
    model = "models/bot-tv/scene.gltf";
    scale = "50 50 50";
    position = "130 50 -180";
    rotation = "-90 0 0";
  }
  else if(classid == 5){
    model = "models/bot-uglyhuman/scene.gltf";
    scale = "210 210 210";
    position = "130 50 -190";
    rotation = "-90 0 0";
  }
  alert(model);

  // 在页面加载完成后，创建<a-nft>元素并设置属性值
  window.addEventListener("load", function () {
    var sceneElement = document.createElement("a-scene");
    sceneElement.setAttribute("vr-mode-ui", "enabled: false;");
    sceneElement.setAttribute("renderer", "logarithmicDepthBuffer: true;");
    sceneElement.setAttribute("embedded", "");
    sceneElement.setAttribute("arjs", "trackingMethod: best; sourceType: webcam; debugUIEnabled: false;");


    var nftElement = document.createElement("a-nft");
    nftElement.setAttribute("type", "nft");
    nftElement.setAttribute("smooth", "true");
    nftElement.setAttribute("url", url);
    nftElement.setAttribute("smoothCount", "10");
    nftElement.setAttribute("smoothTolerance", ".01");
    nftElement.setAttribute("smoothThreshold", "5");

    var aEntity = document.createElement("a-entity");
    aEntity.setAttribute("gltf-model", model);
    aEntity.setAttribute("scale", scale);
    aEntity.setAttribute("position", position);
    aEntity.setAttribute("rotation", rotation);
    aEntity.setAttribute("animation-mixer", "clip: Take 001;");

    var cameraEnity = document.createElement("a-entity");
    cameraEnity.setAttribute("camera","");

    nftElement.appendChild(aEntity);
    sceneElement.appendChild(nftElement);
    sceneElement.appendChild(cameraEnity);


    // 将<a-nft>元素添加到文档中
    document.body.appendChild(sceneElement);
  });
</script>


<body style="margin : 0px; overflow: hidden;">
  <!-- 在加载图像描述符之前，将显示“正在加载”的页面。 根据设备的计算能力，加载可能需要一段时间 -->
  <div class="arjs-loader">
    <div>Loading, please wait...</div>
  </div>

</body>